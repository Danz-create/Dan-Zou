{% assign NAV_BG  = '#7a2d14' %}   {%- comment -%} 内页导航背景色 {%- endcomment -%}
{% assign NAV_INK = '#7a2d14' %}   {%- comment -%} 内页导航文字色 {%- endcomment -%}

<div class="masthead{% if page.url != '/' %} masthead--inner{% endif %}">
  <div class="masthead__inner-wrap"
       {% if page.url != '/' %}
       style="background: {{ NAV_BG }}; border-bottom: 1px solid rgba(255,255,255,.18); padding-top:.4rem; padding-bottom:.4rem;"
       {% endif %}>

    {% if page.url != '/' %}
{% if page.url != '/' %}
<style>
  /* ========== 内页：导航整条背景 + 文字可见（强覆盖） ========== */
  .masthead--inner,
  .masthead--inner .masthead__inner-wrap,
  .masthead--inner .greedy-nav {
    background: #7a2d14 !important;  /* ← 导航背景（红棕） */
    border: none !important;
    box-shadow: none !important;
  }

  /* 导航里的所有链接/标题/图标白色 */
  .masthead--inner .site-title,
  .masthead--inner .greedy-nav a,
  .masthead--inner .greedy-nav a:link,
  .masthead--inner .greedy-nav a:visited,
  .masthead--inner .greedy-nav a:active,
  .masthead--inner #theme-toggle i {
    color: #ffffff !important;
    fill: #ffffff !important;
  }
  .masthead--inner .greedy-nav a:hover { color: #ffe3c4 !important; }

  /* 收紧导航高度与间距 */
  .masthead--inner .greedy-nav .visible-links > li {
    margin: 0 .5rem !important;
  }
  .masthead--inner .greedy-nav a {
    padding: .35rem .4rem !important;
    line-height: 1.2 !important;
    font-size: 1rem !important;
  }
  .masthead--inner {
    padding-top: .4rem !important;
    padding-bottom: .4rem !important;
  }

  /* ========== 左侧栏：背景同色 + 加宽 + 文字放大 ========== */
  .masthead--inner ~ #main .sidebar {
    background: #7a2d14 !important;   /* ← 侧栏背景 */
    color: #ffffff !important;
    width: 300px !important;          /* ← 左栏宽度，可调 320px */
    font-size: 1rem !important;
    line-height: 1.6 !important;
    padding: 1.2rem 1.4rem !important;
  }
  .masthead--inner ~ #main .sidebar a {
    color: #ffffff !important;
  }
  .masthead--inner ~ #main .sidebar a:hover {
    color: #f2c8b0 !important;
  }
  .masthead--inner ~ #main .sidebar .author__avatar {
    background: transparent !important;
  }
  .masthead--inner ~ #main .sidebar .author__avatar img {
    border-radius: 50%;
    width: 120px !important;
    height: 120px !important;
  }

  /* 主体区域右移，为侧栏让路 */
  .masthead--inner ~ #main .archive,
  .masthead--inner ~ #main .page,
  .masthead--inner ~ #main .page__content,
  .masthead--inner ~ #main .initial-content {
    margin-left: 320px !important;  /* 侧栏宽度(300) + 20 */
  }

  /* 桌面端：sticky 侧栏避让导航 */
  @media (min-width: 801px) {
    .masthead--inner ~ #main .sidebar.sticky {
      top: 72px !important;
    }
  }

  /* 内页标题间距 */
  .masthead--inner ~ #main .page__title {
    margin-top: .4rem !important;
  }

  /* ========== 收紧页面左右空隙（关键部分） ========== */
  /* ① 顶部导航容器左右边距 */
  .masthead--inner .masthead__inner-wrap {
    padding-left: 12px !important;   /* ← 调小这里减小顶栏左空隙 */
    padding-right: 12px !important;
  }

  /* ② 主体容器左右边距 */
  .masthead--inner ~ #main .page__inner-wrap {
    padding-left: 12px !important;   /* ← 控制侧栏离屏幕边缘的空隙 */
    padding-right: 12px !important;
  }

  /* ③ 让侧栏整体更贴左边（可选） */
  .masthead--inner ~ #main .sidebar {
    margin-left: -4px !important;    /* ← 想更贴边可设 -6 或 0；想安全留白改 0 */
  }
</style>
{% endif %}

    {% endif %}

    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><span class="navicon"></span></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg persist">
            <a class="site-title" href="{{ '/' | relative_url }}">{{ site.title }}</a>
          </li>

          {% for link in site.data.navigation.main %}
            <li class="masthead__menu-item"><a href="{{ link.url | relative_url }}">{{ link.title }}</a></li>
          {% endfor %}

          <li id="theme-toggle" class="masthead__menu-item persist tail">
            <a role="button" aria-labelledby="theme-icon">
              <i id="theme-icon" class="fa-solid fa-sun" aria-hidden="true" title="toggle theme"></i>
            </a>
          </li>
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
