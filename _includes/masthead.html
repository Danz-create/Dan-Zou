{% assign NAV_BG  = '#7a2d14' %}   {%- comment -%} 内页导航背景色 {%- endcomment -%}
{% assign NAV_INK = '#7a2d14' %}   {%- comment -%} 内页导航文字色 {%- endcomment -%}

<div class="masthead{% if page.url != '/' %} masthead--inner{% endif %}">
  <div class="masthead__inner-wrap"
       {% if page.url != '/' %}
       style="background: {{ NAV_BG }}; border-bottom: 1px solid rgba(255,255,255,.18); padding-top:.4rem; padding-bottom:.4rem;"
       {% endif %}>

    {% if page.url != '/' %}
    <style>
      /* 内页导航整条上色 & 白字 */
      .masthead--inner,
      .masthead--inner .masthead__inner-wrap,
      .masthead--inner .greedy-nav{
        background: {{ NAV_BG }} !important;
        box-shadow: none !important;
        border: none !important;
      }
      .masthead--inner .site-title,
      .masthead--inner .greedy-nav a,
      .masthead--inner .greedy-nav a:link,
      .masthead--inner .greedy-nav a:visited,
      .masthead--inner .greedy-nav a:active,
      .masthead--inner #theme-toggle i{
        color: {{ NAV_INK }} !important;
        fill:  {{ NAV_INK }} !important;
      }
      .masthead--inner .greedy-nav a:hover{ color:#ffe3c4 !important; }

      /* 收紧导航间距，避免与头像重叠 */
      .masthead--inner .greedy-nav .visible-links>li{ margin:0 .5rem !important; }
      .masthead--inner .greedy-nav a{ padding:.35rem .4rem !important; line-height:1.2 !important; font-size:1rem !important; }

      /* 左侧栏上色 + 加宽 + 更大字号 */
      .masthead--inner ~ #main .sidebar{
        background: {{ NAV_BG }} !important;
        color: {{ NAV_INK }} !important;
        width: 300px !important;
        font-size: 1rem !important;
        line-height: 1.6 !important;
        padding: 1.2rem 1.4rem !important;
      }
      .masthead--inner ~ #main .sidebar a{ color: {{ NAV_INK }} !important; }
      .masthead--inner ~ #main .sidebar a:hover{ color:#f2c8b0 !important; }
      .masthead--inner ~ #main .sidebar .author__avatar{ background:transparent !important; }
      .masthead--inner ~ #main .sidebar .author__avatar img{ border-radius:50%; width:120px !important; height:120px !important; }

      /* 主体为侧栏让路 */
      .masthead--inner ~ #main .archive,
      .masthead--inner ~ #main .page,
      .masthead--inner ~ #main .page__content,
      .masthead--inner ~ #main .initial-content{
        margin-left: 310px !important; /* 侧栏宽度300 + 20间距 */
      }

      /* 桌面端：sticky 侧栏避让导航 */
      @media (min-width:801px){
        .masthead--inner ~ #main .sidebar.sticky{ top:72px !important; }
      }
      .masthead--inner ~ #main .page__title{ margin-top:.4rem !important; }
    </style>
    {% endif %}

    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><span class="navicon"></span></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg persist">
            <a class="site-title" href="{{ '/' | relative_url }}">{{ site.title }}</a>
          </li>

          {% for link in site.data.navigation.main %}
            <li class="masthead__menu-item"><a href="{{ link.url | relative_url }}">{{ link.title }}</a></li>
          {% endfor %}

          <li id="theme-toggle" class="masthead__menu-item persist tail">
            <a role="button" aria-labelledby="theme-icon">
              <i id="theme-icon" class="fa-solid fa-sun" aria-hidden="true" title="toggle theme"></i>
            </a>
          </li>
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
